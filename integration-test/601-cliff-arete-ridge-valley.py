# -*- encoding: utf-8 -*-
from shapely.wkt import loads as wkt_loads
import dsl
from . import FixtureTest


class CliffAreteRidgeValley(FixtureTest):
    def test_cliff(self):
        # cliff in Yosemite
        self.generate_fixtures(dsl.way(291684864, wkt_loads('LINESTRING (-119.606652304275 37.7473184229575, -119.606322712397 37.7475568750731, -119.606028064984 37.74775661453209, -119.605635321542 37.74793959017788, -119.605516025272 37.74811709601069, -119.605516025272 37.74833885339959, -119.605565073286 37.74856082321469, -119.605600197414 37.74867859124949, -119.605674128762 37.74892705419649, -119.605733507402 37.74912650583861, -119.605986023829 37.74944805655269, -119.606518994287 37.74974758685328, -119.606890806983 37.74997502166659, -119.60711107389 37.7502379701017, -119.607071458186 37.7505595159861, -119.60690535969 37.75085186795659, -119.606816067151 37.7509851874586, -119.606729469558 37.75109052177009, -119.606477042963 37.75127348917249, -119.606273574551 37.7513843632206, -119.606168381831 37.75151761073579, -119.606140264563 37.751678416586, -119.60618239555 37.75187246275629, -119.606378767271 37.75198340693389, -119.606448925695 37.75220522376329, -119.606371760412 37.752382719364, -119.606210512818 37.75249359175001, -119.605901761855 37.75257676368719, -119.605396818834 37.75265446650548, -119.605158316126 37.75278195861299, -119.604773388027 37.75315541333809, -119.604356839229 37.75351622364438, -119.604078990312 37.75388477393009, -119.604009640372 37.75404166826239, -119.603989787604 37.7542612771538, -119.604108814379 37.75455148376398, -119.604259821179 37.75478650340779, -119.604280841756 37.75498061245099, -119.604224697051 37.75508040120471, -119.604196669614 37.75521911089999, -119.60423871077 37.75531335947959, -119.604365013898 37.75537990870569, -119.604358007039 37.75552955546618, -119.604343993321 37.75572366255988, -119.60433689663 37.7558789904821, -119.6042305361 37.75628900633419, -119.604175559205 37.75653339543988, -119.604084380204 37.7566554121339, -119.603965173765 37.75676627811728, -119.60392313261 37.7569437627762, -119.603796919313 37.7571544853058, -119.603663609325 37.7574872225572, -119.603492480263 37.75783089559862, -119.603333837784 37.7580818845728, -119.602996610226 37.75840339636969, -119.602842638986 37.75855928683071, -119.602655609744 37.75874855658439, -119.60249786558 37.75893839401598, -119.602033436579 37.75915791735211, -119.601834998732 37.75940101862347, -119.601805174665 37.75969120507241, -119.601785411729 37.75984801607169)'), {u'source': u'openstreetmap.org', u'natural': u'cliff'}))  # noqa

        self.assert_has_feature(
            13, 1374, 3166, "earth",
            {"kind": "cliff", "id": 291684864,
             "sort_rank": 227})

    def test_arete(self):
        # arete in Yosemite
        self.generate_fixtures(dsl.way(375271242, wkt_loads('LINESTRING (-119.401549317931 37.813466961351, -119.401034313778 37.81428067468669, -119.400755386883 37.81480618424528, -119.400674358844 37.81503639954349, -119.400726461131 37.8152319826298, -119.400841175992 37.81546730614998, -119.401034313778 37.8159249642497, -119.401077163417 37.81651816270329, -119.400540779361 37.81697588525279, -119.400197533091 37.81745056537648, -119.399918516364 37.81804382253451, -119.399210374426 37.81853538499098, -119.398630961067 37.81914559345329, -119.398244775327 37.81997620402921, -119.397987318166 37.82160340727599, -119.397601132426 37.8223660821422, -119.397495760043 37.82334091503947, -119.397300376468 37.8234438046436, -119.397128977912 37.82363737862718, -119.397104992894 37.82420525421318, -119.396871520752 37.82470521953029, -119.396549744217 37.8251120153795, -119.396258330739 37.82554300508181, -119.395984703903 37.82622205355572, -119.395724192471 37.8271583780685, -119.395698141328 37.82763178648599)'), {u'source': u'openstreetmap.org', u'natural': u'arete', u'name': u'Matthes Crest'}))  # noqa

        self.assert_has_feature(
            13, 1379, 3164, "earth",
            {"kind": "arete", "id": 375271242,
             "sort_rank": 228})

    def test_ridge(self):
        # ridge with name in Santa Cruz Mountains, California
        self.generate_fixtures(dsl.way(115675159, wkt_loads('LINESTRING (-122.09598331024 37.2284726083747, -122.095792687737 37.2284379895402, -122.094154699648 37.2278232164737, -122.093631610658 37.22587550791897, -122.093460301933 37.2229029916846)'), {u'source': u'openstreetmap.org', u'natural': u'ridge', u'name': u'Castle Rock Ridge'}))  # noqa

        self.assert_has_feature(
            13, 1317, 3182, "earth",
            {"kind": "ridge", "id": 115675159,
             "name": "Castle Rock Ridge", "label_placement": True})

    def test_valley(self):
        # valley with name in Yosemite
        # https://www.openstreetmap.org/way/407467016
        self.generate_fixtures(dsl.way(407467016, wkt_loads('LINESTRING (-119.261659888964 37.79166666637099, -119.261590000034 37.79842208142838, -119.261831377351 37.79973815343202, -119.262295447027 37.8010097686072, -119.263309285657 37.80270737446008, -119.265363822543 37.8076113105389, -119.265846577177 37.80927689826868, -119.267144822425 37.81170956259009, -119.269408576941 37.8157863684461, -119.272680870027 37.81900707465889, -119.27403813459 37.81978680719037, -119.275172706793 37.82158779605946, -119.276454782367 37.8236026801022, -119.281829941701 37.8352523783722, -119.285949795257 37.8456062161387, -119.293384881369 37.85417107584448, -119.305873170617 37.86652107633787, -119.315486311967 37.870061373749)'), {u'source': u'openstreetmap.org', u'natural': u'valley', u'name': u'Lyell Canyon'}))  # noqa

        self.assert_has_feature(
            13, 1381, 3164, "earth",
            {"kind": "valley", "id": 407467016,
             "name": "Lyell Canyon", "label_placement": True})
