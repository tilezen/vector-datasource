# -*- encoding: utf-8 -*-
import dsl
from shapely.wkt import loads as wkt_loads

from . import FixtureTest


class KindDetailForAllRoads(FixtureTest):
    def test_ferry(self):
        # Alameda <-> SF Ferry bldg
        self.generate_fixtures(dsl.way(1142505833, wkt_loads('POINT (-122.257403829432 37.73624379503728)'), {u'operator': u'WETA', u'source': u'openstreetmap.org', u'amenity': u'ferry_terminal', u'name': u'Alameda Harbor Bay Terminal'}),dsl.way(1142601108, wkt_loads('POINT (-122.39155688649 37.79512175438538)'), {u'operator': u'WETA', u'source': u'openstreetmap.org', u'amenity': u'ferry_terminal', u'name': u'San Francisco Ferry Building Terminal - Gate E'}),dsl.way(98752535, wkt_loads('LINESTRING (-122.39155688649 37.79512175438538, -122.391235109955 37.79510748629449, -122.391074581014 37.7951459604437, -122.390710942987 37.79521602309568, -122.390240405441 37.79535337977381, -122.38968551609 37.79551181878769, -122.389013037268 37.79577368252399, -122.388130622164 37.79609687603729, -122.386923016928 37.79658886854368, -122.386407833113 37.79676320531269, -122.385656661872 37.7968139588144, -122.384741368429 37.79672380921399, -122.38363473383 37.79661271920088, -122.3825280094 37.79650170000488, -122.38142128497 37.79639060965768, -122.38031456054 37.79627951914359, -122.379207925942 37.79616849944679, -122.376891260656 37.7957288910426, -122.375710245552 37.79540356636198, -122.372697924909 37.7943218142305, -122.370051308419 37.7927625129615, -122.367865168344 37.79099567681239, -122.361856966229 37.78719728683149, -122.356878862251 37.78387345556499, -122.352072336491 37.7804816702389, -122.34666501747 37.77708965826658, -122.340399358195 37.77369756165508, -122.332932112396 37.77030530940969, -122.326237327909 37.76793071835109, -122.320915797998 37.76596295967459, -122.311731871691 37.76257042361649, -122.303663832629 37.759788288733, -122.295767371787 37.7570061912525, -122.285639405948 37.753002423555, -122.279717082774 37.7501520964448, -122.275425471336 37.74736956556708, -122.271649043713 37.7446547675504, -122.268215772529 37.74193986995088, -122.264827596772 37.73943031783611, -122.26308953636 37.73815757222118, -122.261480204528 37.73703768574539, -122.259978221373 37.73640982013369, -122.258910573658 37.73608736026689, -122.258181141647 37.7360381990446, -122.257608196159 37.73619619684509, -122.257444523115 37.73622155887069, -122.257403829432 37.73624379503728)'), {u'website': u'http://sanfranciscobayferry.com', u'source': u'openstreetmap.org', u'route': u'ferry', u'name': u'Alameda Harbor Bay - San Francisco Ferry Building', u'operator': u'WETA'}))

        self.assert_has_feature(
            16, 10487, 25326, 'roads',
            {'kind': 'ferry', 'id': 98752535})

        # SF Pier 41 <-> SF Ferry bldg
        self.generate_fixtures(dsl.way(1142601033, wkt_loads('POINT (-122.412290093079 37.80958136716428)'), {u'source': u'openstreetmap.org', u'amenity': u'ferry_terminal', u'name': u'San Francisco Pier 41'}),dsl.way(1142601108, wkt_loads('POINT (-122.39155688649 37.79512175438538)'), {u'operator': u'WETA', u'source': u'openstreetmap.org', u'amenity': u'ferry_terminal', u'name': u'San Francisco Ferry Building Terminal - Gate E'}),dsl.way(98752545, wkt_loads('LINESTRING (-122.39155688649 37.79512175438538, -122.390612487631 37.7957112867763, -122.389680036366 37.79627987406559, -122.389165122046 37.79661910776849, -122.388735907003 37.7969750920779, -122.388315764945 37.79753181544609, -122.387984915425 37.79800938890008, -122.387770307904 37.79835699058589, -122.387598729685 37.79871296652068, -122.387566480166 37.79899277730748, -122.387566480166 37.7992556224465, -122.387574295509 37.79950739356719, -122.388123435642 37.8008656793466, -122.389239233057 37.8021203111808, -122.390784065851 37.80371398086848, -122.392414867417 37.80523990528928, -122.394431944556 37.8068335076619, -122.396277263813 37.8083253716484, -122.398079733431 37.8095798767602, -122.399491885057 37.81054700076961, -122.401469975313 37.81174980233019, -122.403057927241 37.8125973866811, -122.405504129591 37.813444961302, -122.408593974842 37.81385189017958, -122.409121824903 37.81390369645061, -122.409666922617 37.8139196641295, -122.410403900477 37.81378929680099, -122.411083116663 37.8135805808545, -122.411787934835 37.81333155449377, -122.412499310708 37.81300432023038, -122.412876872622 37.81267900067009, -122.413143043441 37.8123262146839, -122.413375437605 37.8118727924405, -122.413417838086 37.81162170219941, -122.41341334651 37.8112867955996, -122.413375796931 37.81110667355789, -122.413316777617 37.8109244219669, -122.413246978519 37.81079298479258, -122.413171879362 37.81066168932541, -122.412290093079 37.80958136716428)'), {u'operator': u'WETA', u'source': u'openstreetmap.org', u'route': u'ferry', u'name': u'San Francisco Pier 41 - San Francisco Ferry Building'}))

        self.assert_has_feature(
            16, 10487, 25326, 'roads',
            {'kind': 'ferry', 'id': 98752545})

        # South SF <-> SF Ferry bldg
        self.generate_fixtures(dsl.way(1142601108, wkt_loads('POINT (-122.39155688649 37.79512175438538)'), {u'operator': u'WETA', u'source': u'openstreetmap.org', u'amenity': u'ferry_terminal', u'name': u'San Francisco Ferry Building Terminal - Gate E'}),dsl.way(1947212670, wkt_loads('POINT (-122.377267205602 37.6632015103659)'), {u'operator': u'WETA', u'source': u'openstreetmap.org', u'amenity': u'ferry_terminal', u'name': u'South San Francisco Terminal'}),dsl.way(289694213, wkt_loads('LINESTRING (-122.377267205602 37.6632015103659, -122.377403839357 37.66340396620009, -122.377408600428 37.6636582618923, -122.377414259814 37.66387109875248, -122.377360360897 37.6640918994609, -122.377181685987 37.66431227284649, -122.376972468357 37.66438871715619, -122.376635600126 37.66440187268061, -122.375888920462 37.66435479722568, -122.375180778523 37.6643845216101, -122.374429786946 37.6643759882952, -122.37376943538 37.66434007725099, -122.373336177919 37.66424706401028, -122.373069917269 37.6642118640149, -122.372734576173 37.66421890401529, -122.37216603243 37.6642952773102, -122.371758287122 37.6644141748716, -122.371141414017 37.66473609332998, -122.370655425448 37.66510302320349, -122.369057322557 37.66678497524071, -122.36673176395 37.67093056506208, -122.36499379337 37.6755331705644, -122.364074277845 37.67933999472488, -122.362895239035 37.68329506553648, -122.360788060873 37.68731881072658, -122.358990981147 37.69213009873539, -122.358604705574 37.6935224151047, -122.357719595525 37.69687831114527, -122.355269081261 37.70273136046289, -122.354055726807 37.70705368300558, -122.35283159257 37.7132785898829, -122.351423932519 37.71798728872609, -122.351051580834 37.72246646435168, -122.351008731195 37.7286443205995, -122.351287658091 37.73305670881188, -122.351716783302 37.73702759788109, -122.353265029694 37.74171269459109, -122.354010721211 37.74403137068748, -122.355899968086 37.74728908697239, -122.358144498654 37.75100820049698, -122.361782585724 37.75429870719409, -122.364261037592 37.7569909925157, -122.366928225503 37.762914854223, -122.368754230981 37.76761017112109, -122.371181119552 37.77319228051891, -122.37139141516 37.7767217916245, -122.371842010107 37.7786382850425, -122.37196211486 37.78127040041461, -122.374442722686 37.78812161164809, -122.376680695553 37.79012427575459, -122.378309341163 37.79097210829978, -122.38015466042 37.7921251818634, -122.382167425645 37.79347827934819, -122.384012834734 37.79429221294219, -122.384723042797 37.79471777468689, -122.385504127937 37.79517896869227, -122.38652874635 37.79557151727061, -122.387161699299 37.79567920157029, -122.387491381008 37.79570340744599, -122.387791777639 37.79566947662678, -122.388528486004 37.7955461046048, -122.389937493527 37.79520317473192, -122.390728010977 37.7950722064758, -122.39124831519 37.79506425609181, -122.39155688649 37.79512175438538)'), {u'website': u'http://sanfranciscobayferry.com', u'name': u'South San Francisco - San Francisco Ferry Building (Wednesday & Friday only)', u'route': u'ferry', u'source': u'openstreetmap.org', u'motor_vehicle': u'no', u'operator': u'WETA'}))

        self.assert_has_feature(
            16, 10487, 25326, 'roads',
            {'kind': 'ferry', 'id': 289694213})
