-- Suppress certain disputed location names

with bbox as
     (select *
      from (values
            (st_transform(st_geomfromtext('POLYGON ((-78.8936791895715 15.5980611738253,-78.8936791895715 16.1226198589186,-78.3035375151487 16.1226198589186,-78.3035375151487 15.5980611738253,-78.8936791895715 15.5980611738253))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-80.1561341639696 15.5081035683278,-80.1561341639696 16.0544328825036,-79.5435820462143 16.0544328825036,-79.5435820462143 15.5081035683278,-80.1561341639696 15.5081035683278))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((39.2851570170627 -21.8275785170101,39.2851570170627 -21.1444663361133,40.0943737225437 -21.1444663361133,40.0943737225437 -21.8275785170101,39.2851570170627 -21.8275785170101))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-63.7373455685402 15.5589000392562,-63.7373455685402 15.7948579688725,-63.5008199966457 15.7948579688725,-63.5008199966457 15.5589000392562,-63.7373455685402 15.5589000392562))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((131.526139361713 36.9785006772375,131.526139361713 37.4962501959575,132.219998884515 37.4962501959575,132.219998884515 36.9785006772375,131.526139361713 36.9785006772375))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((40.0538251446976 -22.6551458595202,40.0538251446976 -22.0783336927774,40.6897966673672 -22.0783336927774,40.6897966673672 -22.6551458595202,40.0538251446976 -22.6551458595202))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((47.0162900220927 -11.8680752591619,47.0162900220927 -11.276949476206,47.6680853344844 -11.276949476206,47.6680853344844 -11.8680752591619,47.0162900220927 -11.8680752591619))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-3.90261419947099 35.2166686022029,-3.90261419947099 35.2183450157602,-3.89877329077677 35.2183450157602,-3.89877329077677 35.2166686022029,-3.90261419947099 35.2166686022029))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-3.90414003991116 35.2139389829717,-3.90414003991116 35.216303225422,-3.90045697677972 35.216303225422,-3.90045697677972 35.2139389829717,-3.90414003991116 35.2139389829717))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-3.89064424429381 35.2123914415371,-3.89064424429381 35.2142398903804,-3.88717164191273 35.2142398903804,-3.88717164191273 35.2123914415371,-3.89064424429381 35.2123914415371))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-2.44819164272759 35.1737147566953,-2.44819164272759 35.1868002210912,-2.41784480364084 35.1868002210912,-2.41784480364084 35.1737147566953,-2.44819164272759 35.1737147566953))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-5.42245108041892 35.911445617585,-5.42245108041892 35.916946155197,-5.41419842816155 35.916946155197,-5.41419842816155 35.911445617585,-5.42245108041892 35.911445617585))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((54.9901306663452 25.8389190421281,54.9901306663452 25.9102733081739,55.0801169226867 25.9102733081739,55.0801169226867 25.8389190421281,54.9901306663452 25.8389190421281))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((166.330640627221 19.0148960597174,166.330640627221 19.5574017714376,166.960716082001 19.5574017714376,166.960716082001 19.0148960597174,166.330640627221 19.0148960597174))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((54.2627492407458 -16.1410422373153,54.2627492407458 -15.640125757057,54.7853061246785 -15.640125757057,54.7853061246785 -16.1410422373153,54.2627492407458 -16.1410422373153))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-171.332600831643 -11.3005219172534,-171.332600831643 -10.8032238884627,-170.812742979973 -10.8032238884627,-170.812742979973 -11.3005219172534,-171.332600831643 -11.3005219172534))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((110.588920050018 7.31991446909864,110.588920050018 10.2329800517266,116.27583476775 10.2329800517266,116.27583476775 7.31991446909864,110.588920050018 7.31991446909864))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((113.200258440813 9.39815578663045,113.200258440813 11.9526664194354,116.287440716153 11.9526664194354,116.287440716153 9.39815578663045,113.200258440813 9.39815578663045))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((117.46566886109 14.830192077184,117.46566886109 15.4919976497349,118.112774825394 15.4919976497349,118.112774825394 14.830192077184,117.46566886109 14.830192077184))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-88.376473819554 16.0561594831646,-88.376473819554 16.2244813473482,-88.2006124301348 16.2244813473482,-88.2006124301348 16.0561594831646,-88.376473819554 16.0561594831646))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((123.37682930904 25.6639763719534,123.37682930904 25.9984784539093,123.818851071371 25.9984784539093,123.818851071371 25.6639763719534,123.37682930904 25.6639763719534))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((110.819329943326 15.3555777751152,110.819329943326 17.4127747171458,113.282499938151 17.4127747171458,113.282499938151 15.3555777751152,110.819329943326 15.3555777751152))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-75.2624764832813 18.1647239353263,-75.2624764832813 18.6409048514479,-74.75831704475 18.6409048514479,-74.75831704475 18.1647239353263,-75.2624764832813 18.1647239353263))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((9.37399193801725 0.806783882745659,9.37399193801725 0.813520933510986,9.38591771004676 0.813520933510986,9.38591771004676 0.806783882745659,9.37399193801725 0.806783882745659))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((171.080712920463 -22.7835806676051,171.080712920463 -22.0561845969262,172.364775691379 -22.0561845969262,172.364775691379 -22.7835806676051,171.080712920463 -22.7835806676051))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((42.4330662344856 -17.3165896947344,42.4330662344856 -16.7973650426771,43.0346722471581 -16.7973650426771,43.0346722471581 -17.3165896947344,42.4330662344856 -17.3165896947344))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((-66.5030678068811 80.8188708615157,-66.5030678068811 80.833378694951,-66.3964067485758 80.833378694951,-66.3964067485758 80.8188708615157,-66.5030678068811 80.8188708615157))', 4326), 3857)),
            (st_transform(st_geomfromtext('POLYGON ((149.31156296974120323 45.25295484766714083, 148.51898571322695375 46.28741669588851693, 145.16571712444672926 43.85463535901419618, 146.08703350315497005 43.21094860567259843, 149.31156296974120323 45.25295484766714083))', 4326), 3857))
       ) as b (geom)),

suppress_point as
    (select *
    from planet_osm_point l,
       bbox
    where st_within(l.way, bbox.geom)),

update_point as
    (update planet_osm_point p
    set tags = delete(p.tags, (select array_agg(key) from (select distinct skeys(tags) as key from suppress_point) a where key like '%name%'))
    from suppress_point s
    where s.osm_id = p.osm_id),

suppress_line as
    (select *
    from planet_osm_line l,
       bbox
    where st_within(l.way, bbox.geom)),

update_line as
    (update planet_osm_line p
    set tags = delete(p.tags, (select array_agg(key) from (select distinct skeys(tags) as key from suppress_line) a where key like '%name%'))
    from suppress_line s
    where s.osm_id = p.osm_id),

suppress_polygon as
     (select *
      from planet_osm_polygon l,
           bbox
      where st_within(l.way, bbox.geom)),

update_polygon as
    (update planet_osm_polygon p
    set tags = delete(p.tags, (select array_agg(key) from (select distinct skeys(tags) as key from suppress_polygon) a where key like '%name%'))
    from suppress_polygon s
    where s.osm_id = p.osm_id),

 suppress_roads as
     (select *
      from planet_osm_roads l,
           bbox
      where st_within(l.way, bbox.geom))

update planet_osm_roads p
set tags = delete(p.tags, (select array_agg(key) from (select distinct skeys(tags) as key from suppress_roads) a where key like '%name%'))
from suppress_roads s
where s.osm_id = p.osm_id

-- end disputed location names query
